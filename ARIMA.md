[TOC]



# 简介

时间序列可以看成是一个随机过程{$X_t$}，随机过程就是一列随机变量，如{$x_1,x_2,x_3$}表示不同时刻的观测值，{$X_1,X_2,X_3$}表示不同时刻的随机变量（每个时刻都对应一个随机变量$X_t$，但是一个时刻$X_t$只能有一个观测值，从而引出平稳性的概念）。

无论是严平稳还是(弱)平稳，实际上刻画的都是**时间序列的统计性质关于时间平移的不变性**。严平稳要求比较严格，需要所有的统计性质(也就是多个时刻的联合分布)都是关于时间平移不变的，而弱平稳只需要一阶矩（期望）与二阶矩（方差）(以及协方差)是时间平移不变的。

**AR**

自回归模型， $t$时刻的观测值$r_t$表示成$t$时刻之前的$p$个观测值的线性组合加上$t$时刻的随机误差$w_t$。

$$
r_t=\alpha_1r_{t-1}+\alpha_2r_{t-2}+...+\alpha_pr_{t-p}+w_t
$$
**自回归模型不一定都满足平稳性。**举一个最简单的例子，随机游走模型其实就是一个一阶自回归模型，满足:$x_t=x_{t-1}+w_t$。由于$x_t$的方差是时间$t$的函数，因此该序列不满足平稳性。

------

**MA**

滑动平均模型，时刻的观测值$r_t$表示成$p$个历史白噪声的线性组合。
$$
r_t = w_t+\beta_1w_{t-1}+\beta_2w_{t-2}+...+\beta_qw_{t-q}
$$
**滑动平均模型一定满足平稳性**

------

**ARMA**

将一个$p$阶的自回归模型和一个$q$阶的滑动平均模型组合在一起，便得到了一个阶数为$(p,q)$的自回归滑动平均模型
$$
r_t = \alpha_1r_{t-1}+\alpha_2r_{t-2}+...+\alpha_pr_{t-p}+\beta_1w_{t-1}+\beta_2w_{t-2}+...+\beta_qw_{t-q}+w_t
$$
**相比较单一的 AR 或者 MA 模型，ARMA 模型拥有更多的参数。因此它出现过拟合的危险就更高。**

利用**信息量准则（information criterion）和残差自相关检验可以被用来确定 AR、MA 以及 ARMA 模型的阶数**。

**信息量准则，包括赤池信息量准则（Akaike information criterion，简称 AIC，由日本统计学家赤池弘次创立）以及贝叶斯信息量准则（Bayesian information criterion，简称 BIC）**。**AIC 和 BIC 都由两部分组成：第一部分衡量模型的拟合度，第二部分是对参数个数的惩罚（防止过拟合）**

当我们使用 AIC 或者 BIC 确定模型的最优阶数之后，便可以对时间序列建模。但是，我们仍然需要检验该模型是否很好的捕捉了时间序列的自相关性。在本系列反复强调过，如果一个模型和原时间序列的残差满足白噪声，那么该模型就是合适的，而白噪声序列各间隔k的自相关系数均为0，因此，我们只需要检验残差序列是否在任何间隔 k 上呈现出统计意义上显著的自相关性。在这方面，Ljung–Box 检验是一个很好的方法，**它同时检验残差序列各间隔的自相关系数是否显著的不为 0。**

------

**ARIMA**

将自回归模型（AR）、移动平均模型（MA）和差分法结合，我们就得到了差分自回归移动平均模型 ARIMA（p、d、q），其中 d 是需要对数据进行差分的阶数。

------

**ARIMA建模步骤**

1. 通过ADF 检验确定差分阶数d。
2. 通过拖尾和截尾对模型定阶，或者可以根据AIC,BIC准则，来确定模型的阶数p、q；（通过 ACF 、PACF 的图中是否明显的拖尾或截尾，判断是否进行时间序列分解（STL）。）
3. 由以上得到的d、q、p ，得到 ARIMA 模型。然后开始对得到的模型进行模型检验。

# QA

## Q1：ARMA为什么要求序列平稳？

A：ARMA模型将序列表示成其自身的历史值以及历史随机扰动。通俗来说，如果该序列是平稳的，即它的行为并不会随着时间的推移而变化，那么我们就可以通过该序列过去的行为来预测未来。如果时间序列不是平稳的，由历史数据得到的统计性质对未来毫无意义。

平稳性在推导中的核心作用是宽平稳可以保证当观测数趋于无穷的时候样本期望和自协方差函数可以收敛到总体的真实值，这样就把时间序列的总体平均转化为了时间平均。



# 参考资料

时间序列分析（2） ARIMA 模型https://zhuanlan.zhihu.com/p/60648709

写给你的金融时间序列分析：基础、初级、进阶篇 https://zhuanlan.zhihu.com/p/38322333